<!DOCTYPE html>
<!-- Coding by CodingNepal || www.codingnepalweb.com -->
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Boxicons CSS -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
    <title>TPA DDS</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/bootstrap-grid.css" />
    <link rel="stylesheet" href="/css/bootstrap.css" />

  </head>
  <body>
    <!-- navbar -->
    <div class="container-fluid">

    <div class="row">
    <nav class="navbar" style="padding: 20px;">
      <div class="logo_item">
        <i class="bx bx-menu" id="sidebarOpen"></i>
        <img src="/images/logo.png" alt=""></i>TPA DDS
      </div>

     

      <div class="navbar_content">
        <i class="bi bi-grid"></i>
        <i class='bx bx-sun' id="darkLight"></i>
        <i class='bx bx-bell' ></i>
        <img src="/images/utn.png" alt="" class="profile" />
      </div>
    </nav>
</div>
    <!-- sidebar -->
    <div class="row" style="height: 100vw;">
    <nav class="sidebar col-2">
      <div class="menu_content">
        <ul class="menu_items">
          <div class="menu_title menu_dahsboard"></div>
          <!-- duplicate or remove this li tag if you want to add or remove navlink with submenu -->
          <!-- start -->
          <li class="item">
            <div href="#" class="nav_link submenu_item">
              <span class="navlink_icon">
                <i class="bx bx-home-alt"></i>
              </span>
              <span class="navlink">Incidentes</span>
              <i class="bx bx-chevron-right arrow-left"></i>
            </div>

            <ul class="menu_items submenu">
                    <a href="/aperturaIncidentes" class="nav_link sublink">Apertura de Incidentes</a>
                    <a href="/cierreIncidentes" class="nav_link sublink">Cierre de Incidentes</a>
                    <a href="/listadoIncidentes" class="nav_link sublink">Listado de Incidentes</a>
                    <a href="/visualizacionRankings" class="nav_link sublink">Visualización de Rankings</a>
            </ul>
          </li>
          <!-- end -->
            <!-- start -->
            <li class="item">
                <div href="#" class="nav_link submenu_item">
              <span class="navlink_icon">
                <i class="bx bx-world"></i>
              </span>
                    <span class="navlink">Comunidades</span>
                    <i class="bx bx-chevron-right arrow-left"></i>
                </div>

                <ul class="menu_items submenu">
                    <a href="/listaComunidades" class="nav_link sublink">Lista de Comunidades</a>
                    <a href="/altaComunidades" class="nav_link sublink">Alta de Comunidad</a>
                    <a href="/cierreComunidad" class="nav_link sublink">Cierre de Comunidad</a>

                </ul>
            </li>
            <!-- end -->
            <!-- start -->
            <li class="item">
                <div href="#" class="nav_link submenu_item">
              <span class="navlink_icon">
                <i class="bx bx-home-alt"></i>
              </span>
                    <span class="navlink">Entidades</span>
                    <i class="bx bx-chevron-right arrow-left"></i>
                </div>

                <ul class="menu_items submenu">
                    <a href="/altaEntidades" class="nav_link sublink">Alta de Entidades</a>
                    <a href="/listaEntidades" class="nav_link sublink">Lista de Entidades</a>
                </ul>
            </li>
            <!-- end -->
          <!-- duplicate this li tag if you want to add or remove  navlink with submenu -->
          <!-- start -->
          <li class="item">
            <div href="#" class="nav_link submenu_item">
              <span class="navlink_icon">
                <i class="bx bxs-magic-wand"></i>
              </span>
              <span class="navlink">Usuarios</span>
              <i class="bx bx-chevron-right arrow-left"></i>
            </div>

              <ul class="menu_items submenu">
                  <a href="/adminUsuario" class="nav_link sublink">Administración de Usuarios</a>

              </ul>
          </li>
          <!-- end -->
        </ul>


        
        <!-- Sidebar Open / Close -->
        <div class="bottom_content" >
          <div class="bottom expand_sidebar">
            <span> Expand</span>
            <i class='bx bx-log-in' ></i>
          </div>
          <div class="bottom collapse_sidebar">
            <span> Collapse</span>
            <i class='bx bx-log-out'></i>
          </div>
        </div>
      </div>
    </nav>



<div class="body-content col-10" style="margin-left: 20%;">
    <br>
    <h3 class="mb-5">Listado de Incidentes</h3>
        
    <div class="container mt-3">
        <div class="row">
            <div class="col-md-3"> <!-- Ajusta el tamaño del input a 4 columnas en pantallas medianas -->
                <input type="text" id="filtroTabla" class="form-control form-control-lg" placeholder="Comunidad...">
            </div>
            <div class="col-md-3">
                <select id="filtroResuelto" class="form-select">
                    <option value="">Mostrar Todos</option>
                    <option value="SI">Resuelto</option>
                    <option value="NO">No Resuelto</option>
                </select>
            </div>
        </div>

        <table class="table table-striped">
              <thead>
                <tr>
                    <th>ID</th>
                    <th>Descripción</th>
                    <th>Comunidad</th>
                    <th>Establecimiento</th>
                    <th>Fecha de Inicio</th>
                    <th>Fecha de Cierre</th>
                    <th>Resuelto</th>

                </tr>
              </thead>
                {{#each incidentes}}
              <tbody>
                <tr>
                    <td>{{id}}</td>
                    <td>{{observaciones}}</td>
                    <td>{{comunidad}}</td>
                    <td>{{establecimiento}}</td>
                    <td>{{hora_de_inicio}}</td>
                    <td>{{hora_de_cierre}}</td>
                    <td>{{resuelto}}</td>

                </tr>
                {{/each}}

              </tbody>
            </table>

          </div>
    
</div>
</div>
</div>
    <!-- JavaScript -->
    <script src="/js/script.js"></script>
    <script src="/js/jquery-3.7.1.js"></script>

  <script>
      $(document).ready(function() {



    $('#filtroTabla').on('input', function() {
          console.log("hola me cambie");
        var filtro = $(this).val().toLowerCase();
        $('table.table tbody tr').each(function() {
            var filaVisible = false;
            $(this).find('td').each(function() {
                if ($(this).text().toLowerCase().indexOf(filtro) !== -1) {
                    filaVisible = true;
                    return false; // Sale del bucle interno si se encuentra una coincidencia
                }
            });
            $(this).toggle(filaVisible);
        });
    });




    $('#filtroResuelto').change(function() {
            var filtro = $(this).val();
            $('table tbody tr').each(function() {
                var valorResuelto = $(this).find('td:eq(6)').text(); // Índice 6 corresponde a la columna de Resuelto
                if (filtro === '' || valorResuelto === filtro) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        });
});
  </script>
  </body>
</html>
